# Python LSP Behavior
# Configures Pyright as the Python LSP server.
# This config deep merges with lsp-core's tool-lsp config.

bundle:
  name: behavior-python-lsp
  version: 0.1.0

# Include lsp-core behavior to get the tool-lsp module with source
includes:
  - bundle: git+https://github.com/microsoft/amplifier-bundle-lsp@main#subdirectory=behaviors/lsp-core.yaml

# Tool configuration - deep merges with core bundle's tool-lsp
tools:
  - module: tool-lsp
    config:
      languages:
        python:
          extensions:
            - .py
            - .pyi
          workspace_markers:
            - pyproject.toml
            - setup.py
            - setup.cfg
            - requirements.txt
            - .git
          server:
            command:
              - pyright-langserver
              - --stdio
            install_check:
              - pyright
              - --version
            install_hint: "Install with: npm install -g pyright"
          capabilities:
            diagnostics: true
            rename: true
            codeAction: false
            inlayHints: false
            customRequest: false
            goToImplementation: false
          initialization_options:
            python:
              analysis:
                autoSearchPaths: true
                useLibraryCodeForTypes: true
                diagnosticMode: workspace

# Python-specific context for agents
context:
  include:
    - python-dev:context/python-lsp.md

# Python code intelligence agent
agents:
  include:
    - python-dev:code-intel
